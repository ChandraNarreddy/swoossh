<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Admin Home</title>
    <link rel="stylesheet" href="/swoossh/pub/static/nicepage.css" media="screen">
<link rel="stylesheet" href="/swoossh/pub/static/Admin-Home.css" media="screen">
    <script class="u-script" type="text/javascript" src="/swoossh/pub/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/swoossh/pub/static/nicepage.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">


    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1",
		"logo": "/swoossh/pub/static/images/default-logo.png"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Admin Home">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-overlap"><header class="u-clearfix u-header u-header" id="sec-a2d7"><div class="u-clearfix u-sheet u-valign-middle-xl u-sheet-1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <a href="/swoossh/pub/static/images/logo.png" class="u-image u-logo u-image-1">
          <img src="/swoossh/pub/static/images/default-logo.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px; font-weight: 700;">
            <a class="u-button-style u-custom-border u-custom-border-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;"><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</symbol>
</defs></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-spacing-20 u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base" href="/swoossh/home" style="padding: 10px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base" href="/swoossh/pub/static/Users.html" style="padding: 10px;">Users</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-palette-2-base" href="/swoossh/pub/static/Groups.html" style="padding: 10px;">Groups</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/swoossh/home" style="padding: 10px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/swoossh/pub/static/Users.html" style="padding: 10px;">Users</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/swoossh/pub/static/Groups.html" style="padding: 10px;">Groups</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-83c2">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-col">
              <div class="u-container-style u-layout-cell u-size-20 u-layout-cell-1">
                <div class="u-container-layout u-container-layout-1">
                  <h3 class="u-align-center u-text u-text-default u-text-1">Hello {{.Username}}! click the button below to download your SSH certificate</h3>
                  <a href="/swoossh/myNewCert" class="u-border-2 u-border-black u-btn u-btn-round u-button-style u-hover-palette-3-base u-palette-5-base u-radius-1 u-text-white u-btn-1" download><span class="u-icon u-icon-1"><svg class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" style="width: 1em; height: 1em;"><path d="M382.56,233.376C379.968,227.648,374.272,224,368,224h-64V16c0-8.832-7.168-16-16-16h-64c-8.832,0-16,7.168-16,16v208h-64    c-6.272,0-11.968,3.68-14.56,9.376c-2.624,5.728-1.6,12.416,2.528,17.152l112,128c3.04,3.488,7.424,5.472,12.032,5.472    c4.608,0,8.992-2.016,12.032-5.472l112-128C384.192,245.824,385.152,239.104,382.56,233.376z"></path><path d="M432,352v96H80v-96H16v128c0,17.696,14.336,32,32,32h416c17.696,0,32-14.304,32-32V352H432z"></path></svg><img></span>&nbsp;Download
                  </a>
                  <p class="u-text u-text-default u-text-2">Your SSH Public Key is -</p>
                  <blockquote class="u-align-center u-custom-font u-font-lato u-text u-text-3"><span class="u-icon u-icon-2"><svg class="u-svg-content" viewBox="0 0 64 64" style="width: 1em; height: 1em;"><g id="key"><g><path d="M18,40c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6S21.309,40,18,40z M18,51c-2.762,0-5-2.238-5-5    s2.238-5,5-5s5,2.238,5,5S20.762,51,18,51z" fill="currentColor"></path><path d="M52.382,6H46L26.406,25.594c-1.447-0.387-2.938-0.581-4.426-0.581c-4.344-0.001-8.686,1.651-12.001,4.967    c-6.64,6.64-6.64,17.401,0,24.041C13.299,57.34,17.65,59,22,59c4.351,0,8.701-1.66,12.021-4.979    c4.242-4.242,5.761-10.165,4.582-15.623L43,34v-5h5l2-2v-6l2-2h6V7.452V6H52.382z M57,7v0.038L34.102,29.936    c-0.283,0.283-0.66,0.439-1.061,0.439s-0.777-0.156-1.061-0.439s-0.439-0.66-0.439-1.061s0.156-0.777,0.439-1.061L52.796,7H57z     M57,18h-5h-0.414l-0.293,0.293l-2,2L49,20.586V21v5.586L47.586,28H43h-1v1v4.586l-4.104,4.104l-0.386,0.386l0.115,0.532    c1.156,5.353-0.456,10.85-4.312,14.705C30.291,56.336,26.273,58,22,58s-8.291-1.664-11.313-4.687    c-6.238-6.238-6.238-16.389,0-22.627c3.015-3.015,7.025-4.675,11.294-4.674c1.408,0,2.811,0.185,4.168,0.547l0.557,0.149    l0.408-0.408L46.414,7h4.968L31.273,27.107c-0.977,0.976-0.977,2.559,0,3.535c0.488,0.488,1.128,0.732,1.768,0.732    s1.279-0.244,1.768-0.732L57,8.452V18z" fill="currentColor"></path><g><path d="M22,55.5h-0.5v-1H22c6.893,0,12.5-5.607,12.5-12.5v-0.5h1V42C35.5,49.444,29.444,55.5,22,55.5z" fill="currentColor"></path>
</g>
</g>
</g></svg><img></span>
                    <br>{{.SSHPublicKey}}
                  </blockquote>
                </div>
              </div>
              <div class="u-container-style u-layout-cell u-size-20 u-layout-cell-2">
                <div class="u-container-layout u-container-layout-2">
                  <h3 class="u-align-center u-text u-text-4">Use the field below to enter â€‹a new public key</h3>
                  <div class="u-form u-form-1">
                    <form id="edit_pub_key_form" action="/swoossh/User/ID/{{.UUID}}" method="PUT" class="u-clearfix u-form-custom-backend u-form-spacing-10 u-form-vertical u-inner-form" source="custom" name="form" style="padding: 10px;">
                      <div class="u-form-group u-form-group-1">
                        <label for="text-19b3" class="u-form-control-hidden u-label"></label>
                        <input type="text" placeholder="ssh-" id="text-19b3" name="publicKey" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="required">
                      </div>
                      <div class="u-align-right u-form-group u-form-submit">
                        <a href="#" class="u-btn u-btn-submit u-button-style u-btn-2">Submit</a>
                        <input type="submit" value="submit" class="u-form-control-hidden">
                      </div>
                      <div class="u-form-send-message u-form-send-success" id="edit_pubKey_success_message">Your public key has been updated.</div>
                      <div class="u-form-send-error u-form-send-message" id="edit_pubKey_fail_message">Public key update failed.</div>
                      <input type="hidden" value="" name="recaptchaResponse">
                      <input type="hidden" value="{{.UUID}}" name="uuid" id="edit_pub_key_uuid">
                    </form>
                  </div>
                </div>
              </div>
              <div class="u-container-style u-layout-cell u-size-20 u-layout-cell-3">
                <div class="u-container-layout u-container-layout-3">
                  <h3 class="u-align-center u-text u-text-5">Change Password</h3>
                  <div class="u-form u-form-2">
                    <form id="change_passwd_form" action="/swoossh/User/ID/{{.UUID}}" method="PUT" class="u-clearfix u-form-custom-backend u-form-horizontal u-form-spacing-15 u-inner-form" style="padding: 15px" source="custom">
                      <div class="u-form-group u-form-group-3">
                        <label for="text-5587" class="u-form-control-hidden u-label"></label>
                        <input type="text" placeholder="current password" id="text-5587" name="currentPassword" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" required="required">
                      </div>
                      <div class="u-form-group u-form-group-4">
                        <label for="text-acdb" class="u-form-control-hidden u-label"></label>
                        <input type="text" placeholder="new password" id="text-acdb" name="newPassword" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" required="required">
                      </div>
                      <div class="u-form-group u-form-group-5">
                        <label for="text-b60a" class="u-form-control-hidden u-label"></label>
                        <input type="text" placeholder="confirm password" id="text-b60a" name="confirmPassword" class="u-border-1 u-border-grey-30 u-input u-input-rectangle" required="required">
                      </div>
                      <div class="u-form-group u-form-submit">
                        <a href="#" class="u-btn u-btn-submit u-button-style u-btn-3">Submit</a>
                        <input type="submit" value="submit" class="u-form-control-hidden">
                      </div>
                      <div class="u-form-send-message u-form-send-success" id="change_passwd_success_message">Password Changed successfully</div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script type='text/javascript'>
    $(document).ready(function(){
      $('#change_passwd_form').submit(function(e){
          e.preventDefault();
          if ($('#text-acdb').val().trim() != $('#text-b60a').val().trim()) {
            alert("New password and confirm passwords are not the same");
            return false;
          }
          //var id = $('#change_passwd_uuid').val().trim();
          var uri = '/swoossh/changePasswd';
          var formData = new FormData(document.querySelector('#change_passwd_form'));
          changePasswd(uri, formData);
      });

      $('#edit_pub_key_form').submit(function(e){
          e.preventDefault();
          var id = $('#edit_pub_key_uuid').val().trim();
          var uri = '/swoossh/User/ID/'+id;
          var formData = new FormData(document.querySelector('#edit_pub_key_form'));
          editPubKey(uri, formData);
      });
    });

    function editPubKey(uri, formData){
      var json = JSON.stringify(Object.fromEntries(formData));
      $.ajax({
        url: uri,
        method: 'PUT',
        data: json,
        dataType: 'json',
        success: function(response, textStatus, xhr){
          if (xhr.state() == "rejected"){
            location.href = "/swoossh/home";
          }
          if(response['data'] != null) {
             $('#edit_pubKey_success_message').html(response['data']['desc']);
          }
          $("#edit_pubKey_success_message").show();
          setTimeout(function() { $("#edit_pubKey_success_message").hide(); }, 3000);
          $('#text-19b3').val('');
        },
        error: function($xhr, textStatus, thrownError) {
            if ($xhr.state() == "rejected" && $xhr.status == 0) {
              location.href = "/swoossh/home";
            } else {
              $('#edit_pubKey_fail_message').html($xhr.responseJSON['error']['desc']);
              $("#edit_pubKey_fail_message").show();
              setTimeout(function() { $("#edit_pubKey_fail_message").hide(); }, 5000);
            }
         }
      });
    }

    function changePasswd(uri, formData){
      var json = JSON.stringify(Object.fromEntries(formData));
      $.ajax({
        url: uri,
        method: 'POST',
        data: json,
        dataType: 'json',
        success: function(response, textStatus, xhr){
          if (xhr.state() == "rejected"){
            location.href = "/swoossh/home";
          }
          if(response['data'] != null) {
             $('#change_passwd_success_message').html(response['data']['desc']);
          }
          $("#change_passwd_success_message").show();
          setTimeout(function() { $("#change_passwd_success_message").hide(); }, 3000);
          $('#text-5587').val('');
          $('#text-acdb').val('');
          $('#text-b60a').val('');
        },
        error: function($xhr, textStatus, thrownError) {
            if ($xhr.state() == "rejected" && $xhr.status == 0) {
              location.href = "/swoossh/home";
            } else {
              $('#change_passwd_fail_message').html($xhr.responseJSON['error']['desc']);
              $("#change_passwd_fail_message").show();
              setTimeout(function() { $("#change_passwd_fail_message").hide(); }, 5000);
            }
         }
      });
    }
    </script>
  </body>
</html>
